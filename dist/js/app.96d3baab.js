(function(){var t={3525:function(t,e,s){"use strict";var a=s(2856),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],o=(s(4114),s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(5462)),r=s(417),l={name:"App",async mounted(){this.$bus.$on("handleAlert",this.handleAlert),this.$bus.$on("copyToClipboard",this.copyToClipboard),await this.setAnonymousMode(),await this.generateFingerprint()},computed:{},methods:{handleAlert(t,e,s){this.$notify({title:t,message:e,type:s})},copyToClipboard(t,e){e&&navigator.clipboard.writeText(e).then((()=>{this.$bus.$emit("handleAlert",t,"已複製到剪貼簿","success")})).catch((()=>{}))},async setAnonymousMode(){const t=o.A.get("authToken");if(!t){let t;try{const e=await r.A.post("/login/anonymous",null,{headers:{"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});t=e.data,"success"==t.type&&(this.$bus.$currentUser=e.data.userInfo,this.$bus.$emit("setUserInfo"))}catch(e){}}},async generateFingerprint(){const t=localStorage.getItem("deviceFingerprint");if(t)return t;const e=[];e.push(navigator.userAgent),e.push(navigator.language),e.push(navigator.platform),e.push(screen.width+"x"+screen.height),e.push(screen.colorDepth);const s=Array.from(navigator.plugins||[]).map((t=>t.name)).join(",");e.push(s);const a=Array.from(navigator.mimeTypes||[]).map((t=>t.type)).join(",");e.push(a),e.push(Intl.DateTimeFormat().resolvedOptions().timeZone);const i=document.createElement("canvas"),n=i.getContext("2d");n.textBaseline="top",n.font="16px Arial",n.fillText("Fingerprint test",2,2);const o=n.getImageData(0,0,i.width,i.height).data.join(",");e.push(o);const r=e.join("||");let l;try{if(window.crypto&&crypto.subtle){const t=(new TextEncoder).encode(r),e=await crypto.subtle.digest("SHA-256",t),s=Array.from(new Uint8Array(e));l=s.map((t=>t.toString(16).padStart(2,"0"))).join("")}else l=sha256(r)}catch(c){console.warn("Fingerprint SHA-256 error, fallback to js-sha256",c),l=sha256(r)}return localStorage.setItem("deviceFingerprint",l),l}}},c=l,d=s(1656),u=(0,d.A)(c,i,n,!1,null,null,null),h=u.exports,p=s(1594),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"body"},[e("div",{staticClass:"menu"},[e("Menu")],1),e("div",{staticClass:"view"},[e("transition",{attrs:{name:"slide-fade"}},[e("router-view")],1)],1)])},g=[],f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu"},[e("div",{class:{user:!0,list_selected:t.$route.path.includes("/login")||t.$route.path.includes("Info")},on:{click:function(e){t.isLogin?t.goTo(`/academic/${t.userInfo.typeEng}Info`):t.goTo("/academic/login")}}},[e("div",{class:{list_selected_flag:t.$route.path.includes("/login")||t.$route.path.includes("Info")},staticStyle:{height:"130px",position:"absolute","box-sizing":"border-box"}}),e("div",{staticClass:"img_block",on:{click:function(e){return e.stopPropagation(),t.openImgUpload()}}},[e("img",{staticClass:"img",attrs:{src:t.userInfo.userImgUrl?t.userInfo.userImgUrl:"img/user.png",alt:""}}),e("div",{staticClass:"img_upload"},[t._v("變更頭像 "),e("input",{ref:"img_upload_file",staticClass:"img_upload_file",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.uploadUserImg()}}})])]),e("div",{class:"username "+(t.isLogin?"username_login":"")},[t._v(" "+t._s(t.isLogin?`${t.userInfo.name}`:"登入/註冊")+" "),t.isLogin?e("div",{staticClass:"menu_level_box"},[e("img",{staticClass:"menu_level_badge",attrs:{src:t.userInfo.level?`img/badge/${t.userInfo.level.level}.png`:"img/badge/1.png"}}),t._v(" "+t._s(t.userInfo.level?`${t.userInfo.level.levelTitle}`:"")+" ")]):t._e()])]),e("div",{class:{list:!0,list_lock:!t.isLogin,list_selected:t.$route.path.includes("/post")},on:{click:function(e){return t.goTo("/academic/post")}}},[e("div",{class:{list_selected_flag:t.$route.path.includes("/post")}}),t.isLogin?t._e():e("i",{staticClass:"fa-solid fa-lock lock"}),t._v(" 平台公告 ")]),e("div",{class:{list:!0,list_lock:!t.isLogin,list_selected:t.$route.path.includes("/learn")||t.$route.path.includes("/class")},on:{click:function(e){t.isLogin&&t.goTo("/academic/learn")}}},[e("div",{class:{list_selected_flag:t.$route.path.includes("/learn")||t.$route.path.includes("/class")}}),t.isLogin?t._e():e("i",{staticClass:"fa-solid fa-lock lock"}),t._v(" 專欄列表 ")]),t.isLogin?e("div",{class:{list:!0},on:{click:function(e){return t.logout()}}},[t._v("登出系統")]):t._e(),t._m(0),e("div",{staticClass:"footer",on:{click:function(e){return t.goTo("/")}}},[e("img",{staticClass:"footer_img",attrs:{src:"img/horizontal_logo_white.png",alt:""}})])])},v=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"version_info"},[e("div",[t._v("General Version 1.0.0.3")])])}],_={name:"Menu",data(){return{isLogin:!1,userInfo:{account:"",name:"",userImgUrl:"",typeEng:"",type:""}}},mounted(){this.$bus.$on("setUserInfo",this.setUserInfo),this.$bus.$on("updateCurrentUser",this.updateCurrentUser)},methods:{openImgUpload(){let t=this.$refs["img_upload_file"];t.click()},async uploadUserImg(){try{const t=o.A.get("authToken");let e=this.$refs["img_upload_file"],s=e.files[0];if(!s)return;await this.$confirm("確認修改頭貼?","提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"});let a=new FormData;a.append("attachments",s);const i=await r.A.post("/api/userInfo/updateIcon",a,{headers:{"Content-Type":"multipart/form-data","x-user-token":t}});"success"==i.data.type?(this.updateCurrentUser(),this.$bus.$emit("handleAlert","頭像上傳通知",i.data.message,i.data.type)):this.$bus.$emit("handleAlert","頭像上傳通知",i.data.message,i.data.type)}catch(t){console.log(t)}finally{this.$refs["img_upload_file"].value=""}},async updateCurrentUser(){const t=o.A.get("authToken"),e=await r.A.post("/login/token",{save:!0},{headers:{"x-user-token":t,"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});"success"==e.data.type&&(this.$bus.$currentUser=e.data.userInfo,this.setUserInfo())},goTo(t){this.$router.push(t).catch((t=>{}))},setUserInfo(){const t=this.$bus.$currentUser;t&&(this.isLogin=!0),t.userImgUrl+=`?${(new Date).getTime()}`,this.userInfo=t},logout(){this.$confirm("確認是否登出系統?","提示",{confirmButtonText:"登出",cancelButtonText:"取消",type:"warning"}).then((()=>{o.A.remove("authToken"),this.isLogin=!1,this.$bus.$currentUser={},this.userInfo={},this.$bus.$emit("handleAlert","登出訊息","登出成功！","success"),this.$router.replace("/academic/login").catch((t=>{}))})).catch((()=>{}))}}},b=_,C=(0,d.A)(b,f,v,!1,null,"4849f574",null),y=C.exports,k={name:"Academic",components:{Menu:y},data(){return{text:""}},mounted(){this.checkToken()},methods:{async checkToken(){const t=o.A.get("authToken");if(!t)return;const e=await r.A.post("/login/token",{save:!0},{headers:{"x-user-token":t,"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});"success"==e.data.type?(this.$bus.$currentUser=e.data.userInfo,this.$bus.$emit("setUserInfo")):(o.A.remove("authToken"),this.$bus.$currentUser={},this.$bus.$emit("handleAlert","使用者權限異常通知",e.data.message,e.data.type))}}},w=k,x=(0,d.A)(w,m,g,!1,null,"f2683d58",null),$=x.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"header"},[e("i",{staticClass:"fa-solid fa-signs-post post_icon"}),t._v("專欄列表 "),e("div",{staticClass:"searchBox"},[e("i",{staticClass:"fa-solid fa-magnifying-glass search_icon"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search",attrs:{type:"text",placeholder:"關鍵字查詢（主題, 代號, 作者名,...）"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t.searchCourse.length?e("div",{staticClass:"classList"},t._l(t.searchCourse,(function(s,a){return e("div",{key:a,staticClass:"classItem",on:{click:function(e){s.idx?t.goToClass(s.idx):t.handleLockMsg("若要開啟此專欄，請逕行向版主申請。")}}},[e("div",{staticClass:"banner"},[e("el-carousel",{staticClass:"carousel",attrs:{width:"100%",height:"175px",autoplay:!1}},t._l(s.bannerImg,(function(t){return e("el-carousel-item",{key:t.url},[e("img",{directives:[{name:"lazy",rawName:"v-lazy"}],staticClass:"bannerImg",attrs:{src:"img/Loading.gif","data-src":t.url,alt:"",loading:"lazy"}})])})),1)],1),e("div",{staticClass:"classNameBox"},[e("div",{staticClass:"className"},[t._v(t._s(s.courseName))]),s.lock?e("i",{staticClass:"fa-solid fa-lock course_lock"}):t._e()]),e("div",{staticClass:"classNum"},[t._v(t._s(s.courseId))]),e("div",{staticClass:"lecturer"},[t._v(t._s(s.lecturer))])])})),0):e("div",{staticClass:"classList_empty"},[e("el-empty",{attrs:{description:"暫無專欄"}})],1)])},I=[],A={name:"Learn",data(){return{search:"",courseList:[]}},mounted(){this.getCourse()},computed:{searchCourse(){const t=this.search.trim().toLowerCase();return t?this.courseList.filter((e=>e.courseName.toLowerCase().includes(t)||e.courseId.toLowerCase().includes(t)||e.lecturer.toLowerCase().includes(t))):this.courseList}},methods:{handleLockMsg(t){this.$bus.$emit("handleAlert","專欄權限通知",t,"warning")},async getCourse(){const t=o.A.get("authToken");if(!t)return;const e=await r.A.get("/api/learn/getCourse",{headers:{"x-user-token":t}}),s=e.data;"success"==s.type?this.courseList=s.courses:this.$bus.$emit("handleAlert","專欄資料查詢通知",e.data.message,e.data.type)},goToClass(t){this.$router.push({path:"class",query:{idx:t}}).catch((t=>{}))}}},L=A,U=(0,d.A)(L,T,I,!1,null,"b109364e",null),S=U.exports,P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"box"},[t.materials.length?e("div",{staticClass:"pdf"},[e("pdf-viewer",{attrs:{pdfUrl:t.pdfUrl}})],1):e("div",{staticClass:"pdf pdf_empty"},[e("el-empty",{attrs:{description:"本專欄暫無資料"}})],1),e("div",{staticClass:"column"},[t.showUploadOption?e("div",{staticClass:"list_add",on:{click:function(e){return t.openUpload()}}},[e("i",{staticClass:"fa-solid fa-cloud-arrow-up upload_icon"}),t._v("Upload Chapter")]):e("div",{staticClass:"list_add",on:{click:function(e){return t.toggleList()}}},[e("i",{staticClass:"fa-solid fa-list upload_icon"}),t._v("Chapter List")]),e("div",{ref:"list_box",staticClass:"list_box"},t._l(t.materials,(function(s,a){return e("div",{key:a,staticClass:"list right-list"},[e("div",{staticClass:"list_chapter right-list-target",on:{click:function(e){return t.viewChapter(s,a)}}},[t._v("Chapter "+t._s(a+1))]),e("div",{staticClass:"list_title",on:{click:function(e){return t.viewChapter(s,a)}}},[t._v(t._s(s.title))]),t.showUploadOption?e("div",{staticClass:"edit",on:{click:function(e){return t.openUpdate(s)}}},[e("i",{staticClass:"fa-regular fa-pen-to-square"})]):t._e()])})),0)])]),e("el-dialog",{attrs:{title:"上傳文件",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[t._v(" 創建章節："),e("el-input",{staticClass:"form_input",attrs:{placeholder:"請輸入章節名稱"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" 文件上傳： "),e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,limit:1,accept:".pdf","on-change":t.handleUpload,"on-remove":t.handleRemove,"file-list":t.form.fileList}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上傳 PDF 文件")])]),e("el-button",{staticClass:"sendBtn",attrs:{type:"primary",loading:t.isSending,disabled:""==t.form.title||0==t.form.fileList.length},on:{click:function(e){""!=t.form.title&&0!=t.form.fileList.length&&t.create()}}},[t._v("確認上傳")])],1),e("el-dialog",{attrs:{title:"更新文件",visible:t.dialogTableVisible2},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[t._v(" 更新章節："),e("el-input",{staticClass:"form_input",attrs:{placeholder:"請輸入章節名稱"},model:{value:t.update.title,callback:function(e){t.$set(t.update,"title",e)},expression:"update.title"}}),t._v(" 文件上傳： "),e("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,limit:1,accept:".pdf","on-change":t.handleUpload2,"on-remove":t.handleRemove2,"file-list":t.update.fileList}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上傳 PDF 文件")])]),e("el-button",{staticClass:"sendBtn",attrs:{type:"primary",loading:t.isSending2,disabled:""==t.update.title||0==t.update.fileList.length},on:{click:function(e){""!=t.update.title&&0!=t.update.fileList.length&&t.updateChapter()}}},[t._v("確認更新")]),e("el-button",{staticClass:"sendBtn",attrs:{type:"danger",loading:t.isSending3},on:{click:function(e){return t.removeChapter()}}},[t._v("確認刪除")])],1)],1)},V=[],M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pdf-wrapper"},[t.isLoading?e("div",{staticClass:"pdf-loading"},[e("img",{attrs:{src:"img/Loading.gif"}})]):t._e(),e("div",{ref:"pdfContainer",staticClass:"pdf-container"})])},B=[],E=s(1545),F=s(5171),D=s.n(F),N={name:"PdfViewer",props:{pdfUrl:{type:String,required:!0}},data(){return{isLoading:!0,pdf:null,pageCanvases:[],observer:null,preloadCount:1}},mounted(){E.GlobalWorkerOptions.workerSrc=D(),this.loadPdf(this.pdfUrl),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize),this.observer&&this.observer.disconnect()},methods:{async loadPdf(t){this.isLoading=!0;const e=this.$refs.pdfContainer;e.innerHTML="",this.pageCanvases=[];try{this.pdf=await E.getDocument({url:t,httpHeaders:{"x-user-token":o.A.get("authToken")}}).promise;for(let t=1;t<=this.pdf.numPages;t++){const s=document.createElement("canvas");s.style.display="block",s.style.marginBottom="10px",s.dataset.pageNum=t,e.appendChild(s),this.pageCanvases.push({pageNum:t,canvas:s,renderTask:null}),this.isLoading=!1}this.initObserver()}catch(s){}},initObserver(){this.observer&&this.observer.disconnect(),this.observer=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=parseInt(t.target.dataset.pageNum);this.safeRenderPage(e,t.target);for(let t=1;t<=this.preloadCount;t++){const s=this.pageCanvases.find((s=>s.pageNum===e+t));s&&!s.canvas.dataset.rendered&&this.safeRenderPage(s.pageNum,s.canvas)}}}))}),{root:this.$refs.pdfContainer,threshold:.1}),this.pageCanvases.forEach((({canvas:t})=>{this.observer.observe(t)}))},async safeRenderPage(t,e){const s=this.pageCanvases.find((e=>e.pageNum===t));if(!s||!this.pdf)return;s.renderTask&&s.renderTask.cancel();const a=await this.pdf.getPage(t),i=this.$refs.pdfContainer.clientWidth,n=window.devicePixelRatio||1,o=a.getViewport({scale:1}),r=i/o.width*n,l=a.getViewport({scale:r});e.width=l.width,e.height=l.height,e.style.width=`${i}px`,e.style.height=l.height/l.width*i+"px";const c=e.getContext("2d");s.renderTask=a.render({canvasContext:c,viewport:l});try{await s.renderTask.promise,e.dataset.rendered=!0}catch(d){}finally{s.renderTask=null}},handleResize(){const t=this.$refs.pdfContainer;this.pdf&&t&&this.pageCanvases.forEach((({pageNum:t,canvas:e})=>{e.dataset.rendered&&this.safeRenderPage(t,e)}))}},watch:{pdfUrl(t){this.loadPdf(t)}}},O=N,R=(0,d.A)(O,M,B,!1,null,"c4d05172",null),z=R.exports,H={name:"Class",components:{pdfViewer:z},data(){return{currentUser:{},courseIdx:this.$route.query.idx,materials:[],pdfUrl:"",form:{title:"",fileList:[]},dialogTableVisible:!1,attachment:[],isSending:!1,showUploadOption:!1,update:{materialIdx:"",title:"",fileList:[]},dialogTableVisible2:!1,attachment2:[],isSending2:!1,isSending3:!1}},async mounted(){await this.getData(),this.currentUser=this.$bus.$currentUser,this.currentUser&&"teacher"==this.currentUser.typeEng&&(this.showUploadOption=!0)},methods:{toggleList(){this.$refs["list_box"].classList.toggle("list_box_close")},async getData(){const t=await r.A.get(`/api/learn/getCourseMaterial/${this.courseIdx}`,{headers:{"x-user-token":o.A.get("authToken")}});this.materials=t.data.materials,this.$nextTick((()=>{document.querySelectorAll(".right-list-target")[0].click()}))},async viewChapter(t,e){const s=document.querySelectorAll(".right-list");s.forEach((t=>t.classList.remove("list_selected"))),s[e]&&s[e].classList.add("list_selected"),this.pdfUrl=t.attachmentUrl},openUpload(){this.dialogTableVisible=!0},handleUpload(t,e){this.form.fileList=e},handleRemove(t,e){this.form.fileList=e},async create(){try{this.isSending=!0;let t=new FormData;t.append("idx",this.courseIdx),t.append("title",this.form.title),this.form.fileList&&this.form.fileList.length>0&&this.form.fileList.forEach(((e,s)=>{t.append("attachments",e.raw)}));const e=await r.A.post("/api/learn/createMaterial",t,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type&&(this.dialogTableVisible=!1,this.form.title="",this.form.fileList=[],await this.getData(),this.$bus.$emit("handleAlert","章節創建通知",e.data.message,e.data.type))}catch(t){}finally{this.isSending=!1}},async openUpdate(t){this.update.title=t.title,this.update.materialIdx=t.idx,this.dialogTableVisible2=!0},handleUpload2(t,e){this.update.fileList=e},handleRemove2(t,e){this.update.fileList=e},async updateChapter(){try{this.isSending2=!0;let t=new FormData;t.append("idx",this.courseIdx),t.append("materialIdx",this.update.materialIdx),t.append("title",this.update.title),this.update.fileList&&this.update.fileList.length>0&&this.update.fileList.forEach(((e,s)=>{t.append("attachments",e.raw)}));const e=await r.A.post("/api/learn/modifyMaterial",t,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type&&(this.dialogTableVisible2=!1,this.update.title="",this.update.fileList=[],this.update.materialIdx="",await this.getData(),this.$bus.$emit("handleAlert","章節更新通知",e.data.message,e.data.type))}catch(t){}finally{this.isSending2=!1}},async removeChapter(t){this.isSending3=!0;try{const t=await r.A.get(`/api/learn/deleteMaterial/${this.courseIdx}/${this.update.materialIdx}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type&&(this.dialogTableVisible2=!1,this.update.title="",this.update.fileList=[],this.update.materialIdx="",await this.getData(),this.$bus.$emit("handleAlert","章節刪除通知",t.data.message,t.data.type))}catch(e){}finally{this.isSending3=!1}}}},q=H,j=(0,d.A)(q,P,V,!1,null,"6955dc5c",null),W=j.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"posterContainer"},[e("router-view",{staticClass:"router_view"}),e("div",{staticClass:"column"},[e("self-intro")],1)],1)])},Y=[],G=function(){var t=this;t._self._c;return t._m(0)},J=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("div",{staticClass:"title"},[t._v("版主介紹")]),e("div",{staticClass:"userImg"}),e("div",{staticClass:"name"},[e("div",{staticClass:"name_chinese"},[t._v("林英豪")]),e("div",{staticClass:"name_Englist"},[t._v("YING-HAO, LIN")])]),e("div",{staticClass:"part"},[e("div",{staticClass:"part_title"},[t._v("學歷")]),e("div",{staticClass:"part_detail"},[t._v("國立清華大學半導體研究學院 "),e("span",{staticStyle:{"font-weight":"bolder"}},[t._v("碩士*")])]),e("div",{staticClass:"part_detail"},[t._v("國立清華大學工程與系統科學系 "),e("span",{staticStyle:{"font-weight":"bolder"}},[t._v("學士")])])]),e("div",{staticClass:"part"},[e("div",{staticClass:"part_title"},[t._v("研究領域")]),e("div",{staticClass:"part_detail"},[t._v("前瞻半導體二維材料元件設計")])]),e("div",{staticClass:"part"},[e("div",{staticClass:"part_title"},[t._v("工作經驗")]),e("div",{staticClass:"work_name"},[t._v("國家高速網路與計算中心 "),e("div",{staticClass:"work_time"},[t._v("202507-202509")])]),e("div",{staticClass:"work_title"},[t._v("大數據服務研發工程師（實習）")]),e("div",{staticClass:"work_name"},[t._v("國家高速網路與計算中心 "),e("div",{staticClass:"work_time"},[t._v("202407-202507")])]),e("div",{staticClass:"work_title"},[t._v("PINNs 前端開發工程師（實習）")])]),e("div",{staticClass:"part"},[e("div",{staticClass:"part_title"},[t._v("自我簡介")]),e("div",{staticClass:"part_personal_intro"},[t._v("我平時熱衷於鑽研電子電路與人工智慧應用，也喜歡透過專案實作培養解決問題的能力。在探索新知的過程中，我深刻體會到"),e("span",{staticStyle:{"font-weight":"bolder"}},[t._v("「誠信」")]),t._v("的重要性，因為唯有誠信才能讓團隊彼此信任，讓創新成果被業界與客戶認可。我希望未來能以專業結合誠懇態度，在半導體產業持續貢獻與成長。")])])])}],Z={name:"SelfIntro"},Q=Z,X=(0,d.A)(Q,G,J,!1,null,"1b67184a",null),tt=X.exports,et={name:"Post",components:{SelfIntro:tt}},st=et,at=(0,d.A)(st,K,Y,!1,null,"f2b8b8fc",null),it=at.exports,nt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"posterBox"},[t.posts.length?e("div",{ref:"postAll",class:"postAll "+("teacher"==t.currentUser.typeEng?"":"postAll_student")},t._l(t.posts,(function(s,a){return e("div",{key:a,staticClass:"post"},[t.showPermission?e("div",{staticClass:"post_more"},[e("el-dropdown",{on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" 操作"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:{method:"modify",content:s.content,idx:s.idx}}},[t._v("編輯")]),e("el-dropdown-item",{attrs:{command:{method:"delete",idx:s.idx}}},[t._v("刪除")])],1)],1)],1):t._e(),e("div",{staticClass:"post_top"},[e("div",{staticClass:"post_top_img"},[e("img",{attrs:{src:s.creator.userImgUrl?s.creator.userImgUrl:"img/user.png",alt:""}})]),e("div",{staticClass:"post_top_detail"},[e("div",{staticClass:"post_top_name"},[t._v(t._s(s.creator.name))]),e("div",{staticClass:"post_top_date"},[t._v(t._s(s.createTime))])])]),""!=s.content.trim()?e("div",{staticClass:"post_text",domProps:{innerHTML:t._s(t.linkify(s.content))}}):t._e(),t.checkPostTextOverflow(s.content)?e("div",{staticClass:"post_text_expand_logo",on:{click:function(e){return t.expandPostText(e)}}},[t._v("顯示更多")]):t._e(),s.postImg.length?e("div",{staticClass:"post_img"},[e("el-carousel",{attrs:{autoplay:!1,loop:!1}},t._l(s.postImg,(function(t,s){return e("el-carousel-item",{key:s},[e("div",{staticClass:"carousel_img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy"}],attrs:{src:"img/Loading.gif","data-src":t.url,alt:""}})])])})),1)],1):t._e(),e("div",{staticClass:"post_footer"},[s.likeCount||s.message.length?e("div",{staticClass:"post_summary"},[s.likeCount||s.isLike?e("div",{staticClass:"post_summary_thumb"},[e("i",{staticClass:"fa-solid fa-thumbs-up post_summary_thumb_icon"}),s.isLike&&1!=s.likeCount?e("span",[t._v("你和其他 "+t._s(s.likeCount-1)+" 人")]):s.isLike?e("span",[t._v("你")]):e("span",[t._v(t._s(s.likeCount))])]):t._e(),s.message.length?e("div",{staticClass:"post_summary_msg"},[t._v(t._s(s.message.length)+" "),e("i",{staticClass:"fa-solid fa-message post_summary_msg_icon"})]):t._e()]):t._e(),e("div",{staticClass:"post_option_box"},[e("div",{class:"post_option "+(s.isLike?"like":""),on:{click:function(e){return t.toggleLikePost(s.idx,e,s)}}},[e("i",{class:"fa-regular fa-thumbs-up icon "+(s.isLike?"fa-solid":"")}),t._v(" "),e("span",[t._v(t._s(s.isLike?"收回讚":"按讚"))])]),e("div",{staticClass:"post_option",on:{click:function(e){return t.openUserMessageBox(e)}}},[e("i",{staticClass:"fa-regular fa-message icon"}),t._v(" 留言")]),e("div",{staticClass:"post_option",on:{click:function(e){return t.openShare(s.idx)}}},[e("i",{staticClass:"fa-regular fa-share-from-square icon"}),t._v(" 分享")])]),e("div",{staticClass:"userMessageBox"},[s.message.length?t._e():e("div",{staticClass:"userMessage",staticStyle:{"text-align":"center",color:"gray","font-size":"14px"}},[t._v("目前暫時沒有人留言")]),t._l(s.message,(function(s,a){return e("div",{key:a,staticClass:"userMessage_active"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy"}],staticClass:"userMessage_active_img",attrs:{src:"img/user.png","data-src":s.userImgUrl,alt:"",loading:"lazy"}}),e("div",{staticClass:"userMessage_active_msgBox"},[e("div",{staticClass:"userMessage_active_name"},[t._v(t._s(s.name)+" "),e("img",{staticClass:"userMessage_activ_badge",attrs:{src:s.level?`img/badge/${s.level}.png`:"img/badge/1.png",alt:""}}),e("span",{staticClass:"userMessage_active_createTime"},[t._v(t._s(s.createTime))])]),e("div",{staticClass:"userMessage_active_msg"},[t._v(t._s(s.message))])])])})),e("div",{staticClass:"post_viewer_input_box"},[e("img",{staticClass:"viewer_inputTextBoxImg",attrs:{src:t.currentUser.userImgUrl?t.currentUser.userImgUrl:"img/user.png",alt:""}}),e("textarea",{staticClass:"viewer_textArea",attrs:{placeholder:"在此貼文下進行留言"}}),e("div",{staticClass:"viewer_send",on:{click:function(e){return t.sendUserMessage(s.idx,e)}}},[e("i",{staticClass:"fa-solid fa-feather"})])])],2)])])})),0):e("div",{staticClass:"postAll postAll_empty"},[e("el-empty",{attrs:{description:"分享之貼文不公開或已刪除"}})],1)]),t.showPermission?e("el-dialog",{attrs:{title:"修改貼文",visible:t.dialogTableVisible2},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[e("div",{ref:"modifyContent",staticClass:"real_input",attrs:{contenteditable:"true"}}),e("el-button",{staticClass:"button",attrs:{type:"primary",loading:t.isSending},on:{click:function(e){return t.modifyPost()}}},[t._v("修改貼文")])],1):t._e(),e("el-dialog",{attrs:{title:"分享貼文",visible:t.dialogTableVisible3},on:{"update:visible":function(e){t.dialogTableVisible3=e}}},[e("div",{staticClass:"copyLinkTitle"},[t._v("Share via")]),e("div",{staticClass:"shareViaBox"},[e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("facebook")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/facebook.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Facebook")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("twitter")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/twitter.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Twitter")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("line")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/line.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Line")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("linkedin")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/linkedin.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("LinkedIn")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("pinterest")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/pinterest.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Pinterest")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("whatsapp")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/whatsapp.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("WhatsApp")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("telegram")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/telegram.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Telegram")])])]),e("div",{staticClass:"copyLinkTitle"},[t._v("Or copy link")]),e("div",{staticClass:"shareBox"},[e("div",{staticClass:"shareUrl"},[t._v(t._s(t.shareUrl))]),e("div",{staticClass:"shareButton",on:{click:function(e){return t.copyShareUrl()}}},[t._v(t._s(t.shareStatus))])])])],1)},ot=[],rt={name:"Normal",data(){return{currentUser:{},isSending:!1,showPlaceholder:!0,posts:[],page:1,showPermission:!1,isLoading:!1,modifyIdx:"",modifyContent:"",dialogTableVisible2:!1,dialogTableVisible3:!1,shareUrl:"",shareStatus:"Copy"}},async mounted(){await this.setAnonymousMode(),await this.getPost(),await this.getUserInfo(),this.currentUser=this.$bus.$currentUser},methods:{linkify(t){if(!t)return"";let e="",s=t;const a="@href=[";let i;while(-1!==(i=s.indexOf(a))){e+=s.slice(0,i);const t=i+a.length,n=s.indexOf("]",t);if(-1===n){e+=s.slice(i),s="";break}const o=s.slice(t,n).trim();e+=`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`,s=s.slice(n+1)}return e+=s,e},async setAnonymousMode(){const t=o.A.get("authToken");if(!t){let t;try{const e=await r.A.post("/login/anonymous",null,{headers:{"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});t=e.data,"success"==t.type&&(this.$bus.$currentUser=e.data.userInfo,this.$bus.$emit("setUserInfo"))}catch(e){}}},handleCommand(t){"delete"==t.method&&this.deletePost(t.idx),"modify"==t.method&&this.openModifyBox(t.content,t.idx)},async copyShareUrl(t){let e=location.protocol+"//"+location.host+"/#/academic/post/share?share="+t;this.$bus.$emit("copyToClipboard","分享貼文連結通知",e)},async getUserInfo(){const t=o.A.get("authToken");if(t)try{const e=await r.A.post("/login/token",{save:!1},{headers:{"x-user-token":t,"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});"success"==e.data.type&&(this.showPermission="teacher"==e.data.userInfo.typeEng)}catch(e){}},openShare(t){let e=location.protocol+"//"+location.host+"/#/academic/post/share?share="+t;this.shareUrl=e,this.shareStatus="COPY",this.dialogTableVisible3=!0},async shareVia(t){const e={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.shareUrl)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(this.shareUrl)}&text=${encodeURIComponent("快來看看檸檬小天地")}`,line:`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(this.shareUrl)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(this.shareUrl)}`,pinterest:`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(this.shareUrl)}&media=${encodeURIComponent(this.imageUrl||"")}&description=${encodeURIComponent("快來看看檸檬小天地")}`,whatsapp:`https://api.whatsapp.com/send?text=${encodeURIComponent("快來看看檸檬小天地 "+this.shareUrl)}`,telegram:`https://t.me/share/url?url=${encodeURIComponent(this.shareUrl)}&text=${encodeURIComponent("快來看看檸檬小天地")}`};window.open(e[t],"_blank","width=600,height=500")},async copyShareUrl(){this.$bus.$emit("copyToClipboard","分享貼文連結通知",this.shareUrl),this.shareStatus="✓ COPIED"},async getPost(t){if(this.isLoading)return;this.isLoading=!0,"refresh"==t&&(this.posts=[],this.page=1);let e=`/api/post/share/${this.$route.query.share}`;try{const t=await r.A.get(e,{headers:{"x-user-token":o.A.get("authToken")}});if("success"==t.data.type){const e=t.data.posts;this.posts=this.posts.concat(e),this.page++}else this.$bus.$emit("handleAlert","貼文獲取通知",t.data.message,t.data.type)}catch(s){}finally{this.isLoading=!1}},async deletePost(t){try{await this.$confirm("確認是否刪除貼文?","提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const e=await r.A.delete(`/api/post/deletePost/${t}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type?(this.getPost("refresh"),this.$bus.$emit("handleAlert","貼文刪除通知",e.data.message,e.data.type)):this.$bus.$emit("handleAlert","貼文刪除通知",e.data.message,e.data.type)}catch(e){}},async openModifyBox(t,e){this.dialogTableVisible2=!0,this.$nextTick((()=>{this.$refs["modifyContent"].innerHTML=t})),this.modifyIdx=e},async modifyPost(){try{this.modifyContent=this.$refs["modifyContent"].innerHTML;const t=await r.A.post(`/api/post/modifyPost/${this.modifyIdx}`,{content:this.modifyContent},{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(this.getPost("refresh"),this.dialogTableVisible2=!1,this.modifyContent="",this.modifyIdx="",this.$bus.$emit("handleAlert","貼文修改通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","貼文修改通知",t.data.message,t.data.type)}catch(t){}},async toggleLikePost(t,e,s){const a=e.currentTarget,i=a.querySelector("i"),n=a.querySelector("span");try{const e=await r.A.get(`/api/post/toggleLikePost/${t}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type?(a.classList.toggle("like"),i.classList.toggle("fa-solid"),"按讚"==n.innerText?n.innerText="收回讚":n.innerText="按讚",s.likeCount=e.data.likeCount,s.isLike?s.isLike=!1:s.isLike=!0):this.$bus.$emit("handleAlert","貼文按讚通知",e.data.message,e.data.type)}catch(l){}},checkPostTextOverflow(t,e=144){const s=document.createElement("div");s.style.wordBreak="break-all",s.style.position="absolute",s.style.visibility="hidden",s.style.lineHeight="1.5";const a=document.querySelector(".post_text"),i=a?a.clientWidth+"px":"589px";s.style.width=i,s.innerHTML=t,document.body.appendChild(s);const n=s.offsetHeight>e;return document.body.removeChild(s),n},msgScrollToBottom(t){this.$nextTick((()=>{const e=t.target.closest(".userMessageBox");e&&(e.scrollTop=e.scrollHeight)}))},openUserMessageBox(t){const e=t.currentTarget,s=e.querySelector("i");s.classList.toggle("fa-solid");const a=e.closest(".post_option_box").nextElementSibling;a.classList.toggle("userMessageBox_open")},async sendUserMessage(t,e){try{const s=e.currentTarget,a=s.previousElementSibling,i=a.value;console.log("here");const n=await r.A.post("/api/post/message",{postIdx:t,message:i},{headers:{"x-user-token":o.A.get("authToken"),"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});if("success"==n.data.type){const s=this.posts.find((e=>e.idx==t));s.message.push(n.data.data),a.value="",this.msgScrollToBottom(e)}else this.$bus.$emit("handleAlert","貼文留言通知",n.data.message,n.data.type)}catch(s){console.log(s)}},expandPostText(t){const e=t.currentTarget.closest(".post"),s=e.querySelector(".post_text");"顯示更多"==t.currentTarget.innerText?t.currentTarget.innerText="顯示更少":t.currentTarget.innerText="顯示更多",s.classList.toggle("post_text_expand")}}},lt=rt,ct=(0,d.A)(lt,nt,ot,!1,null,"6a8ffeb8",null),dt=ct.exports,ut=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"posterBox"},["teacher"==t.currentUser.typeEng?e("div",{staticClass:"inputBox"},[e("div",{staticClass:"inputTextBox",on:{click:function(e){return t.openDialog("img")}}},[e("div",{staticClass:"inputTextBoxImg"},[e("img",{attrs:{src:t.currentUser.userImgUrl?t.currentUser.userImgUrl:"img/user.png",alt:""}})]),e("div",{staticClass:"textArea"},[t._v("發表您的貼文和公告")])]),e("div",{staticClass:"iconBox"},[e("div",{staticClass:"icon_item",on:{click:function(e){return t.openDialog("post")}}},[e("i",{staticClass:"fa-regular fa-pen-to-square icon"}),t._v(" 建立貼文 ")]),e("div",{staticClass:"icon_item",on:{click:function(e){return t.openDialog("img")}}},[e("i",{staticClass:"fa-regular fa-images icon"}),t._v(" 相片 / 影片 ")])])]):t._e(),t.posts.length?e("div",{ref:"postAll",class:"postAll "+("teacher"==t.currentUser.typeEng?"":"postAll_student"),on:{scroll:function(e){return t.postDivScroll()}}},t._l(t.posts,(function(s,a){return e("div",{key:a,staticClass:"post"},[t.showPermission?e("div",{staticClass:"post_more"},[e("el-dropdown",{on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" 操作"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:{method:"modify",content:s.content,idx:s.idx}}},[t._v("編輯")]),e("el-dropdown-item",{attrs:{command:{method:"delete",idx:s.idx}}},[t._v("刪除")])],1)],1)],1):t._e(),e("div",{staticClass:"post_top"},[e("div",{staticClass:"post_top_img"},[e("img",{attrs:{src:s.creator.userImgUrl?s.creator.userImgUrl:"img/user.png",alt:""}})]),e("div",{staticClass:"post_top_detail"},[e("div",{staticClass:"post_top_name"},[t._v(t._s(s.creator.name))]),e("div",{staticClass:"post_top_date"},[t._v(t._s(s.createTime))])])]),""!=s.content.trim()?e("div",{staticClass:"post_text",domProps:{innerHTML:t._s(t.linkify(s.content))}}):t._e(),t.checkPostTextOverflow(s.content)?e("div",{staticClass:"post_text_expand_logo",on:{click:function(e){return t.expandPostText(e)}}},[t._v("顯示更多")]):t._e(),s.postImg.length?e("div",{staticClass:"post_img"},[e("el-carousel",{attrs:{autoplay:!1,loop:!1}},t._l(s.postImg,(function(t,s){return e("el-carousel-item",{key:s},[e("div",{staticClass:"carousel_img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy"}],attrs:{src:"img/Loading.gif","data-src":t.url,alt:""}})])])})),1)],1):t._e(),e("div",{staticClass:"post_footer"},[s.likeCount||s.message.length?e("div",{staticClass:"post_summary"},[s.likeCount||s.isLike?e("div",{staticClass:"post_summary_thumb"},[e("i",{staticClass:"fa-solid fa-thumbs-up post_summary_thumb_icon"}),s.isLike&&1!=s.likeCount?e("span",[t._v("你和其他 "+t._s(s.likeCount-1)+" 人")]):s.isLike?e("span",[t._v("你")]):e("span",[t._v(t._s(s.likeCount))])]):t._e(),s.message.length?e("div",{staticClass:"post_summary_msg"},[t._v(t._s(s.message.length)+" "),e("i",{staticClass:"fa-solid fa-message post_summary_msg_icon"})]):t._e()]):t._e(),e("div",{staticClass:"post_option_box"},[e("div",{class:"post_option "+(s.isLike?"like":""),on:{click:function(e){return t.toggleLikePost(s.idx,e,s)}}},[e("i",{class:"fa-regular fa-thumbs-up icon "+(s.isLike?"fa-solid":"")}),t._v(" "),e("span",[t._v(t._s(s.isLike?"收回讚":"按讚"))])]),e("div",{staticClass:"post_option",on:{click:function(e){return t.openUserMessageBox(e)}}},[e("i",{staticClass:"fa-regular fa-message icon"}),t._v(" 留言")]),e("div",{staticClass:"post_option",on:{click:function(e){return t.openShare(s.idx)}}},[e("i",{staticClass:"fa-regular fa-share-from-square icon"}),t._v(" 分享")])]),e("div",{staticClass:"userMessageBox"},[s.message.length?t._e():e("div",{staticClass:"userMessage",staticStyle:{"text-align":"center",color:"gray","font-size":"14px"}},[t._v("目前暫時沒有人留言")]),t._l(s.message,(function(s,a){return e("div",{key:a,staticClass:"userMessage_active"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy"}],staticClass:"userMessage_active_img",attrs:{src:"img/user.png","data-src":s.userImgUrl,alt:"",loading:"lazy"}}),e("div",{staticClass:"userMessage_active_msgBox"},[e("div",{staticClass:"userMessage_active_name"},[t._v(t._s(s.name)+" "),e("img",{staticClass:"userMessage_activ_badge",attrs:{src:s.level?`img/badge/${s.level}.png`:"img/badge/1.png",alt:""}}),e("span",{staticClass:"userMessage_active_createTime"},[t._v(t._s(s.createTime))])]),e("div",{staticClass:"userMessage_active_msg"},[t._v(t._s(s.message))])])])})),e("div",{staticClass:"post_viewer_input_box"},[e("img",{staticClass:"viewer_inputTextBoxImg",attrs:{src:t.currentUser.userImgUrl?t.currentUser.userImgUrl:"img/user.png",alt:""}}),e("textarea",{staticClass:"viewer_textArea",attrs:{placeholder:"在此貼文下進行留言"}}),e("div",{staticClass:"viewer_send",on:{click:function(e){return t.sendUserMessage(s.idx,e)}}},[e("i",{staticClass:"fa-solid fa-feather"})])])],2)])])})),0):e("div",{staticClass:"postAll postAll_empty"},[e("el-empty",{attrs:{description:"暫無貼文"}})],1)]),t.showPermission?e("el-dialog",{attrs:{title:"建立貼文",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[e("div",{ref:"input",staticClass:"real_input",attrs:{contenteditable:"true"}}),e("el-upload",{attrs:{action:"#","auto-upload":!1,"list-type":"picture-card","on-change":t.handleUpload,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.form.attachments,multiple:!0,accept:"image/*"}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),e("el-button",{staticClass:"button",attrs:{type:"primary",loading:t.isSending},on:{click:function(e){return t.create()}}},[t._v("建立貼文")])],1):t._e(),t.showPermission?e("el-dialog",{attrs:{title:"修改貼文",visible:t.dialogTableVisible2},on:{"update:visible":function(e){t.dialogTableVisible2=e}}},[e("div",{ref:"modifyContent",staticClass:"real_input",attrs:{contenteditable:"true"}}),e("el-button",{staticClass:"button",attrs:{type:"primary",loading:t.isSending},on:{click:function(e){return t.modifyPost()}}},[t._v("修改貼文")])],1):t._e(),e("el-dialog",{attrs:{title:"分享貼文",visible:t.dialogTableVisible3},on:{"update:visible":function(e){t.dialogTableVisible3=e}}},[e("div",{staticClass:"copyLinkTitle"},[t._v("Share via")]),e("div",{staticClass:"shareViaBox"},[e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("facebook")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/facebook.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Facebook")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("twitter")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/twitter.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Twitter")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("line")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/line.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Line")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("linkedin")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/linkedin.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("LinkedIn")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("pinterest")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/pinterest.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Pinterest")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("whatsapp")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/whatsapp.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("WhatsApp")])]),e("div",{staticClass:"shareViaItem",on:{click:function(e){return t.shareVia("telegram")}}},[e("img",{staticClass:"shareEachIcon",attrs:{src:"img/socialIcon/telegram.png",alt:""}}),e("div",{staticClass:"shareEachTitle"},[t._v("Telegram")])])]),e("div",{staticClass:"copyLinkTitle"},[t._v("Or copy link")]),e("div",{staticClass:"shareBox"},[e("div",{staticClass:"shareUrl"},[t._v(t._s(t.shareUrl))]),e("div",{staticClass:"shareButton",on:{click:function(e){return t.copyShareUrl()}}},[t._v(t._s(t.shareStatus))])])])],1)},ht=[],pt={name:"Normal",data(){return{currentUser:{},form:{content:"",attachments:[]},isSending:!1,showPlaceholder:!0,dialogTableVisible:!1,sendEnabled:!1,inputKeyUpfunction:{},dialogImageUrl:"",dialogVisible:!1,posts:[],page:1,showPermission:!1,isLoading:!1,modifyIdx:"",modifyContent:"",dialogTableVisible2:!1,dialogTableVisible3:!1,shareUrl:"",shareStatus:"Copy"}},async mounted(){this.inputKeyUpfunction=window.addEventListener("keyup",(()=>{this.dialogTableVisible&&this.$refs.input&&""==this.$refs.input.innerText.trim()&&4==this.$refs.input.innerHTML.length&&(this.$refs.input.innerHTML="")})),await this.getPost(),await this.getUserInfo(),this.currentUser=this.$bus.$currentUser},methods:{linkify(t){if(!t)return"";let e="",s=t;const a="@href=[";let i;while(-1!==(i=s.indexOf(a))){e+=s.slice(0,i);const t=i+a.length,n=s.indexOf("]",t);if(-1===n){e+=s.slice(i),s="";break}const o=s.slice(t,n).trim();e+=`<a href="${o}" target="_blank" rel="noopener noreferrer">${o}</a>`,s=s.slice(n+1)}return e+=s,e},handleCommand(t){"delete"==t.method&&this.deletePost(t.idx),"modify"==t.method&&this.openModifyBox(t.content,t.idx)},async getUserInfo(){const t=o.A.get("authToken");if(t)try{const e=await r.A.post("/login/token",{save:!1},{headers:{"x-user-token":t,"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});"success"==e.data.type&&(this.showPermission="teacher"==e.data.userInfo.typeEng)}catch(e){}},openShare(t){let e=location.protocol+"//"+location.host+"/#/academic/post/share?share="+t;this.shareUrl=e,this.shareStatus="COPY",this.dialogTableVisible3=!0},async shareVia(t){const e={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.shareUrl)}`,twitter:`https://twitter.com/intent/tweet?url=${encodeURIComponent(this.shareUrl)}&text=${encodeURIComponent("快來看看檸檬小天地")}`,line:`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(this.shareUrl)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(this.shareUrl)}`,pinterest:`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(this.shareUrl)}&media=${encodeURIComponent(this.imageUrl||"")}&description=${encodeURIComponent("快來看看檸檬小天地")}`,whatsapp:`https://api.whatsapp.com/send?text=${encodeURIComponent("快來看看檸檬小天地 "+this.shareUrl)}`,telegram:`https://t.me/share/url?url=${encodeURIComponent(this.shareUrl)}&text=${encodeURIComponent("快來看看檸檬小天地")}`};window.open(e[t],"_blank","width=600,height=500")},async copyShareUrl(){this.$bus.$emit("copyToClipboard","分享貼文連結通知",this.shareUrl),this.shareStatus="✓ COPIED"},postDivScroll(){const t=this.$refs.postAll;t.scrollHeight-t.scrollTop===t.clientHeight&&this.getPost()},async getPost(t){if(this.isLoading)return;this.isLoading=!0,"refresh"==t&&(this.posts=[],this.page=1);let e=`/api/post/getPost?page=${this.page}`;try{const t=await r.A.get(e,{headers:{"x-user-token":o.A.get("authToken")}});if("success"==t.data.type){const e=t.data.posts;this.posts=this.posts.concat(e),this.page++,this.$nextTick((async()=>{const t=this.$refs.postAll;t&&t.scrollHeight<=t.clientHeight&&e.length>0&&await this.getPost()}))}else this.$bus.$emit("handleAlert","貼文獲取通知",t.data.message,t.data.type)}catch(s){}finally{this.isLoading=!1}},async create(){this.isSending=!0,this.form.content=this.$refs.input.innerHTML;const t=new FormData;t.append("content",this.form.content),this.form.attachments&&this.form.attachments.length>0&&this.form.attachments.forEach(((e,s)=>{t.append("attachments",e.raw)}));const e=await r.A.post("/api/post/create",t,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type?(this.getPost("refresh"),this.dialogTableVisible=!1,this.form={content:"",attachments:[]},this.$refs.input.innerHTML="",this.$bus.$emit("handleAlert","貼文創建通知",e.data.message,e.data.type)):this.$bus.$emit("handleAlert","貼文創建通知",e.data.message,e.data.type),this.isSending=!1},async deletePost(t){try{await this.$confirm("確認是否刪除貼文?","提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const e=await r.A.delete(`/api/post/deletePost/${t}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type?(this.getPost("refresh"),this.$bus.$emit("handleAlert","貼文刪除通知",e.data.message,e.data.type)):this.$bus.$emit("handleAlert","貼文刪除通知",e.data.message,e.data.type)}catch(e){}},async openModifyBox(t,e){this.dialogTableVisible2=!0,this.$nextTick((()=>{this.$refs["modifyContent"].innerHTML=t})),this.modifyIdx=e},async modifyPost(){try{this.modifyContent=this.$refs["modifyContent"].innerHTML;const t=await r.A.post(`/api/post/modifyPost/${this.modifyIdx}`,{content:this.modifyContent},{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(this.getPost("refresh"),this.dialogTableVisible2=!1,this.modifyContent="",this.modifyIdx="",this.$bus.$emit("handleAlert","貼文修改通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","貼文修改通知",t.data.message,t.data.type)}catch(t){}},async toggleLikePost(t,e,s){const a=e.currentTarget,i=a.querySelector("i"),n=a.querySelector("span");try{const e=await r.A.get(`/api/post/toggleLikePost/${t}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type?(a.classList.toggle("like"),i.classList.toggle("fa-solid"),"按讚"==n.innerText?n.innerText="收回讚":n.innerText="按讚",s.likeCount=e.data.likeCount,s.isLike?s.isLike=!1:s.isLike=!0):this.$bus.$emit("handleAlert","貼文按讚通知",e.data.message,e.data.type)}catch(l){}},checkPostTextOverflow(t,e=144){const s=document.createElement("div");s.style.wordBreak="break-all",s.style.position="absolute",s.style.visibility="hidden",s.style.lineHeight="1.5";const a=document.querySelector(".post_text"),i=a?a.clientWidth+"px":"589px";s.style.width=i,s.innerHTML=t,document.body.appendChild(s);const n=s.offsetHeight>e;return document.body.removeChild(s),n},openDialog(){this.showPermission?this.dialogTableVisible=!0:this.$bus.$emit("handleAlert","創建貼文權限通知","目前平台並未開放學生進行貼文","warning")},handleUpload(t,e){this.form.attachments=e},handleRemove(t,e){this.form.attachments=e},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},msgScrollToBottom(t){this.$nextTick((()=>{const e=t.target.closest(".userMessageBox");e&&(e.scrollTop=e.scrollHeight)}))},openUserMessageBox(t){const e=t.currentTarget,s=e.querySelector("i");s.classList.toggle("fa-solid");const a=e.closest(".post_option_box").nextElementSibling;a.classList.toggle("userMessageBox_open")},async sendUserMessage(t,e){try{const s=e.currentTarget,a=s.previousElementSibling,i=a.value;console.log("here");const n=await r.A.post("/api/post/message",{postIdx:t,message:i},{headers:{"x-user-token":o.A.get("authToken"),"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});if("success"==n.data.type){const s=this.posts.find((e=>e.idx==t));s.message.push(n.data.data),a.value="",this.msgScrollToBottom(e)}else this.$bus.$emit("handleAlert","貼文留言通知",n.data.message,n.data.type)}catch(s){console.log(s)}},expandPostText(t){const e=t.currentTarget.closest(".post"),s=e.querySelector(".post_text");"顯示更多"==t.currentTarget.innerText?t.currentTarget.innerText="顯示更少":t.currentTarget.innerText="顯示更多",s.classList.toggle("post_text_expand")}},beforeDestroy(){window.removeEventListener("keyup",this.inputKeyUpfunction)}},mt=pt,gt=(0,d.A)(mt,ut,ht,!1,null,"04841dc2",null),ft=gt.exports,vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"box"},[t._m(0),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("帳號：")]),e("el-input",{attrs:{placeholder:"請輸入帳號",clearable:""},model:{value:t.student.account,callback:function(e){t.$set(t.student,"account",e)},expression:"student.account"}})],1),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("密碼：")]),e("el-input",{attrs:{placeholder:"請輸入密碼",clearable:"","show-password":""},model:{value:t.student.password,callback:function(e){t.$set(t.student,"password",e)},expression:"student.password"}})],1),e("div",{staticClass:"btn"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login("student")}}},[t._v("會員登入")])],1)]),e("div",{staticClass:"box"},[t._m(1),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("帳號：")]),e("el-input",{attrs:{placeholder:"請輸入帳號",clearable:""},model:{value:t.teacher.account,callback:function(e){t.$set(t.teacher,"account",e)},expression:"teacher.account"}})],1),e("div",{staticClass:"login"},[e("div",{staticClass:"login_text"},[t._v("密碼：")]),e("el-input",{attrs:{placeholder:"請輸入密碼",clearable:"","show-password":""},model:{value:t.teacher.password,callback:function(e){t.$set(t.teacher,"password",e)},expression:"teacher.password"}})],1),e("div",{staticClass:"btn"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login("teacher")}}},[t._v("管理員登入")])],1)])])},_t=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("i",{staticClass:"fa-solid fa-id-card"}),t._v(" 會員登入")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("i",{staticClass:"fa-solid fa-id-card"}),t._v(" 管理員登入")])}],bt={name:"Login",data(){return{text:"",student:{account:"",password:"",type:"student"},teacher:{account:"",password:"",type:"teacher"}}},mounted(){},methods:{async login(t){let e;if(Object.values(this[t]).some((t=>null===t||void 0===t||""===t.trim())))return this.$bus.$emit("handleAlert","登入訊息","登入資料不可為空。","error");try{const s=await r.A.post("/login/verify",this[t],{headers:{"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});e=s.data,"success"==e.type&&(this.$bus.$currentUser=s.data.userInfo,this.$bus.$emit("setUserInfo"),this.$router.replace(`/academic/${t}Info`).catch((t=>{})))}catch(s){}finally{this.$bus.$emit("handleAlert","登入訊息",e.message,e.type)}}}},Ct=bt,yt=(0,d.A)(Ct,vt,_t,!1,null,"646fb0bf",null),kt=yt.exports,wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"sum_box"},[e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("已訂閱專欄")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.course_num))])]),e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("可使用專欄")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.available_num))])]),e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("已失效專欄")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.inavailable_num))])])],1),e("div",{staticClass:"table"},[e("router-view")],1)])},xt=[],$t={name:"TeacherInfo",async mounted(){this.initialize()},data(){return{course_num:0,available_num:0,inavailable_num:0}},methods:{initialize(){this.getCourse()},async getCourse(){try{const t=await r.A.get("/api/infoPage/getStudentCourse",{headers:{"x-user-token":o.A.get("authToken")}});t.data.courses&&(this.course_num=t.data.courses.length,this.available_num=t.data.courses.filter((t=>!0===t.status)).length,this.inavailable_num=this.course_num-this.available_num)}catch(t){}}}},Tt=$t,It=(0,d.A)(Tt,wt,xt,!1,null,"5d8ebe95",null),At=It.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"sum_box"},[e("router-link",{staticClass:"sum",attrs:{to:"clientTable"}},[e("div",{staticClass:"sum_title"},[t._v("用戶總數 (上限 "+t._s(t.limit.studentNum)+" 人)")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.student_num))])]),e("router-link",{staticClass:"sum",attrs:{to:{path:"teacherCourseTable"}}},[e("div",{staticClass:"sum_title"},[t._v("專欄總數 (上限 "+t._s(t.limit.classNum)+" 欄)")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.course_num))])]),e("router-link",{staticClass:"sum",attrs:{to:""}},[e("div",{staticClass:"sum_title"},[t._v("空間用量 (上限 "+t._s(t.limit.memory)+" MB)")]),e("div",{staticClass:"sum_num"},[t._v(t._s(t.usage_memory))])])],1),e("div",{staticClass:"table"},[e("router-view")],1)])},Ut=[],St={name:"TeacherInfo",async mounted(){this.$bus.$on("setStudentNum",this.setStudentNum),this.$bus.$on("setCourseNum",this.setCourseNum),this.$bus.$on("getUsageMemory",this.getUsageMemory),this.initialize()},data(){return{student_num:0,course_num:0,usage_memory:0,limit:{memory:0,studentNum:0,classNum:0}}},methods:{initialize(){this.getUsageMemory(),this.getStudent(),this.getCourse()},setStudentNum(t){this.student_num=t},setCourseNum(t){this.course_num=t},async getCourse(){try{const t=await r.A.get("/api/infoPage/getCourse",{headers:{"x-user-token":o.A.get("authToken")}});t.data.courses&&(this.course_num=t.data.courses.length)}catch(t){}},async getStudent(){try{const t=await r.A.get("/api/infoPage/getStudent",{headers:{"x-user-token":o.A.get("authToken")}});t.data.students&&(this.student_num=t.data.students.length)}catch(t){}},async getUsageMemory(){const t=await r.A.get("/api/getUsageMemory",{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(t.data.size<100?this.usage_memory=parseFloat(t.data.size).toFixed(2):t.data.size<1e3?this.usage_memory=parseFloat(t.data.size).toFixed(1):this.usage_memory=parseInt(t.data.size),this.limit=t.data.limit):this.$bus.$emit("handleAlert","儲存空間資訊通知",t.data.message,t.data.type)}}},Pt=St,Vt=(0,d.A)(Pt,Lt,Ut,!1,null,"9487442e",null),Mt=Vt.exports,Bt=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("el-table",{staticClass:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)","empty-text":"暫無數據"}},[e("el-table-column",{attrs:{prop:"createTime",label:"創建時間"}}),e("el-table-column",{attrs:{prop:"courseId",label:"專欄代碼"}}),e("el-table-column",{attrs:{prop:"courseName",label:"專欄名稱"}}),e("el-table-column",{attrs:{prop:"lecturer",label:"專欄負責人"}}),e("el-table-column",{attrs:{prop:"status",label:"狀態"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{class:s.row.status?"valid":"invalid"},[t._v(t._s(s.row.status?"公開":"不公開"))])]}}])}),e("el-table-column",{attrs:{label:"專欄通道",width:"250"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btn",on:{click:function(e){s.row.status&&t.goToCourse(s.row.idx)}}},[t._v(t._s(s.row.status?"進入專欄":"目前無法進入專欄"))])]}}])})],1)],1)},Et=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tableTitle"},[e("div",{staticClass:"tableTitle_left"},[t._v("專欄總覽")])])}],Ft={name:"StudentCourseTable",data(){return{tableData:[]}},mounted(){this.getCourseList()},methods:{goToCourse(t){this.$router.push({path:"/academic/class",query:{idx:t}}).catch((t=>{}))},async getCourseList(){const t=await r.A.get("/api/infoPage/getStudentCourse",{headers:{"x-user-token":o.A.get("authToken")}});t.data.courses?(this.tableData=t.data.courses,this.$bus.$emit("setCourseNum",this.tableData.length)):this.$bus.$emit("handleAlert","專欄資料查詢通知",t.data.message,t.data.type)}}},Dt=Ft,Nt=(0,d.A)(Dt,Bt,Et,!1,null,"084f3cf9",null),Ot=Nt.exports,Rt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tableTitle"},[e("div",{staticClass:"tableTitle_left"},[t._v("專欄總覽")]),e("el-button",{staticClass:"tableTitle_right",on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增專欄")])],1),e("el-table",{staticClass:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)","empty-text":"暫無數據"}},[e("el-table-column",{attrs:{prop:"createTime",label:"創建時間"}}),e("el-table-column",{attrs:{prop:"courseId",label:"專欄代碼"}}),e("el-table-column",{attrs:{prop:"lecturer",label:"專欄負責人"}}),e("el-table-column",{attrs:{prop:"status",label:"狀態"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{class:s.row.status?"valid":"invalid"},[t._v(t._s(s.row.status?"公開":"不公開"))])]}}])}),e("el-table-column",{attrs:{label:"管理操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btn"},[e("el-button",{staticClass:"btn_link",on:{click:function(e){return t.openStudentList(s.row)}}},[t._v("編輯")]),e("el-button",{staticClass:"btn_link",attrs:{type:"warning"},on:{click:function(e){return t.stopCourse(s.row.courseId,s.row.idx)}}},[t._v(t._s(s.row.status?"隱藏":"公開"))]),e("el-button",{staticClass:"btn_link",attrs:{type:"danger"},on:{click:function(e){return t.deleteCourse(s.row.courseId,s.row.idx)}}},[t._v("刪除")])],1)]}}])})],1),e("el-dialog",{attrs:{title:"創建專欄",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"專欄名稱"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.courseName,callback:function(e){t.$set(t.form,"courseName",e)},expression:"form.courseName"}})],1),e("el-form-item",{attrs:{label:"專欄代碼"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.courseId,callback:function(e){t.$set(t.form,"courseId",e)},expression:"form.courseId"}})],1),e("el-form-item",{attrs:{label:"專欄負責人"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.lecturer,callback:function(e){t.$set(t.form,"lecturer",e)},expression:"form.lecturer"}})],1)],1),e("div",{staticClass:"class_banner_title"},[t._v("專欄封面上傳（限制兩張，上傳後暫不提供修改，至少 350 pixel x 175 pixel）")]),e("el-upload",{attrs:{action:"#","on-change":t.handleUpload,"list-type":"picture-card","auto-upload":!1,"file-list":t.fileList,limit:2,multiple:!0,accept:"image/*"},scopedSlots:t._u([{key:"file",fn:function({file:s}){return e("div",{},[e("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),e("span",{staticClass:"el-upload-list__item-actions"},[e("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(s)}}},[e("i",{staticClass:"el-icon-zoom-in"})]),e("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove(s)}}},[e("i",{staticClass:"el-icon-delete"})])])])}}])},[e("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v("創建")])],1)],1),e("el-dialog",{attrs:{title:`${t.setStudentList.courseId} - 用戶名單`,visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[e("el-form",{attrs:{model:t.setStudentList}},[e("el-form-item",{attrs:{label:"專欄代碼"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.setStudentList.courseId,callback:function(e){t.$set(t.setStudentList,"courseId",e)},expression:"setStudentList.courseId"}})],1),e("el-form-item",{attrs:{label:"專欄負責人"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.setStudentList.lecturer,callback:function(e){t.$set(t.setStudentList,"lecturer",e)},expression:"setStudentList.lecturer"}})],1)],1),e("el-transfer",{staticClass:"transfer",attrs:{props:{key:"idx",label:"name"},filterable:!0,"filter-method":t.customFilter,"filter-placeholder":"請輸入用戶姓名或帳號",data:t.students,titles:["用戶列表","已選用戶"]},model:{value:t.setStudentList.studentList,callback:function(e){t.$set(t.setStudentList,"studentList",e)},expression:"setStudentList.studentList"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.pushStudentList()}}},[t._v("保存")])],1)],1)],1)},zt=[],Ht={name:"TeacherCourseTable",data(){return{tableData:[],dialogFormVisible:!1,form:{courseName:"",courseId:"",lecturer:""},fileList:[],dialogImageUrl:"",dialogVisible:!1,dialogFormVisible2:!1,students:[],setStudentList:{idx:"",courseId:"",lecturer:"",newCourseId:"",studentList:[]}}},mounted(){this.getCourseList()},methods:{async getStudentList(){const t=await r.A.get("/api/infoPage/getStudent",{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(this.students=t.data.students,this.$bus.$emit("setStudentNum",this.students.length)):this.$bus.$emit("handleAlert","用戶資料查詢通知",t.data.message,t.data.type)},async getCourseList(){const t=await r.A.get("/api/infoPage/getCourse",{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(this.tableData=t.data.courses,this.$bus.$emit("setCourseNum",this.tableData.length)):this.$bus.$emit("handleAlert","專欄資料查詢通知",t.data.message,t.data.type)},async create(){const t=new FormData;t.append("courseName",this.form.courseName),t.append("courseId",this.form.courseId),t.append("lecturer",this.form.lecturer),this.fileList&&this.fileList.length>0&&this.fileList.forEach(((e,s)=>{t.append("attachments",e.raw)}));const e=await r.A.post("/api/infoPage/createCourse",t,{headers:{"x-user-token":o.A.get("authToken")}});"success"==e.data.type?(this.getCourseList(),this.dialogFormVisible=!1,this.form={courseName:"",courseId:"",lecturer:""},this.$bus.$emit("getUsageMemory"),this.$bus.$emit("handleAlert","專欄資料創建通知",e.data.message,e.data.type)):this.$bus.$emit("handleAlert","專欄資料創建通知",e.data.message,e.data.type)},async deleteCourse(t,e){try{await this.$confirm(`確認是否刪除專欄 (${t})?`,"提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const s=await r.A.delete(`/api/infoPage/deleteCourse/${e}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==s.data.type?(this.getCourseList(),this.$bus.$emit("getUsageMemory"),this.$bus.$emit("handleAlert","專欄資料刪除通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","專欄資料刪除通知",s.data.message,s.data.type)}catch(s){}},async stopCourse(t,e){try{await this.$confirm(`確認是否變更專欄 (${t}) 權限?`,"提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"});const s=await r.A.put(`/api/infoPage/stopCourse/${e}`,{},{headers:{"x-user-token":o.A.get("authToken")}});"success"==s.data.type?(this.getCourseList(),this.$bus.$emit("handleAlert","專欄權限變更通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","專欄權限變更通知",s.data.message,s.data.type)}catch(s){}},handleUpload(t){this.fileList.push(t)},handleRemove(t){const e=this.fileList.indexOf(t);-1!==e&&this.fileList.splice(e,1)},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},async openStudentList(t){this.setStudentList.idx=t.idx,this.setStudentList.courseId=t.courseId,this.setStudentList.lecturer=t.lecturer,await this.getStudentList(),await this.getCourseList();const e=this.tableData.filter((e=>e.idx==t.idx))[0];this.setStudentList.studentList=e.studentList,this.dialogFormVisible2=!0},async pushStudentList(){try{await this.$confirm(`確認是否修改專欄 (${this.setStudentList.courseId})?`,"提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"});const t=await r.A.post("/api/infoPage/setStudentToCourse",this.setStudentList,{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(this.getCourseList(),this.getStudentList(),this.dialogFormVisible2=!1,this.setStudentList={idx:"",courseId:"",lecturer:"",studentList:[]},this.$bus.$emit("handleAlert","專欄修改通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","專欄修改通知",t.data.message,t.data.type)}catch(t){}},customFilter(t,e){return e.name.toLowerCase().includes(t.toLowerCase())||e.account.toLowerCase().includes(t.toLowerCase())}}},qt=Ht,jt=(0,d.A)(qt,Rt,zt,!1,null,"bdfba4c4",null),Wt=jt.exports,Kt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tableTitle"},[e("div",{staticClass:"tableTitle_left"},[t._v("用戶總覽")]),e("div",{staticClass:"tableTitle_right"},[e("el-button",{on:{click:function(e){return t.editSelf()}}},[t._v("編輯個人資料")]),e("el-button",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增用戶")])],1)]),e("el-table",{staticClass:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 360px)","empty-text":"暫無數據"}},[e("el-table-column",{attrs:{prop:"level",label:"會員階級",sortable:""},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(" Lv"+t._s(e.level?`${e.level.level} ${e.level.levelTitle}`:"")+" ")]}}])}),e("el-table-column",{attrs:{prop:"name",label:"用戶姓名"}}),e("el-table-column",{attrs:{prop:"lastOnline",label:"上次訪問時間",sortable:""}}),e("el-table-column",{attrs:{prop:"fingerprint",label:"裝置識別碼"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("div",{staticClass:"fingerprint",on:{click:function(e){return t.copyFingerPrint(s.fingerprint)}}},[t._v(" "+t._s(s.fingerprint)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"status",label:"狀態",sortable:""},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{class:s.row.status?"valid":"invalid"},[t._v(t._s(s.row.status?"有效":"凍結"))])]}}])}),e("el-table-column",{attrs:{label:"管理操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"btn"},[e("el-button",{staticClass:"btn_link",on:{click:function(e){return t.editUser(s.row.idx)}}},[t._v("查看")]),e("el-button",{staticClass:"btn_link",attrs:{type:"warning"},on:{click:function(e){return t.stopUser(s.row.account,s.row.idx)}}},[t._v(t._s(s.row.status?"凍結":"解凍"))]),e("el-button",{staticClass:"btn_link",attrs:{type:"danger"},on:{click:function(e){return t.deleteUser(s.row.account,s.row.idx)}}},[t._v("刪除")])],1)]}}])})],1),e("el-dialog",{attrs:{title:"創建用戶",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"用戶帳號"}},[e("el-input",{attrs:{placeholder:"若要創建訪客帳號，請命名為 Visitor",autocomplete:"off",clearable:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),e("el-form-item",{attrs:{label:"用戶名稱"}},[e("el-input",{attrs:{autocomplete:"off",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"用戶密碼"}},[e("el-input",{attrs:{autocomplete:"off","show-password":"",clearable:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v("創建")])],1)],1)],1)},Yt=[],Gt={name:"ClientTable",data(){return{tableData:[],dialogFormVisible:!1,form:{account:"",password:"",name:"",type:"student"}}},mounted(){this.getData()},methods:{async getData(){const t=await r.A.get("/api/infoPage/getStudent",{headers:{"x-user-token":o.A.get("authToken")}});t.data.students?(this.tableData=t.data.students,this.$bus.$emit("setStudentNum",this.tableData.length)):this.$bus.$emit("handleAlert","用戶資料查詢通知",t.data.message,t.data.type)},async create(){const t=await r.A.post("/api/infoPage/createStudent",this.form,{headers:{"x-user-token":o.A.get("authToken")}});"success"==t.data.type?(this.getData(),this.dialogFormVisible=!1,this.form.account="",this.form.password="",this.form.name="",this.$bus.$emit("handleAlert","用戶資料創建通知",t.data.message,t.data.type)):this.$bus.$emit("handleAlert","用戶資料創建通知",t.data.message,t.data.type)},async deleteUser(t,e){try{await this.$confirm(`確認是否刪除用戶 (${t})?`,"提示",{confirmButtonText:"刪除",cancelButtonText:"取消",type:"warning"});const s=await r.A.delete(`/api/infoPage/deleteStudent/${e}`,{headers:{"x-user-token":o.A.get("authToken")}});"success"==s.data.type?(this.getData(),this.$bus.$emit("getUsageMemory"),this.$bus.$emit("handleAlert","用戶資料刪除通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","用戶資料刪除通知",s.data.message,s.data.type)}catch(s){}},async stopUser(t,e){try{await this.$confirm(`確認是否變更用戶 (${t}) 權限?`,"提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"});const s=await r.A.put(`/api/infoPage/stopStudent/${e}`,{},{headers:{"x-user-token":o.A.get("authToken")}});"success"==s.data.type?(this.getData(),this.$bus.$emit("handleAlert","用戶權限變更通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","用戶權限變更通知",s.data.message,s.data.type)}catch(s){}},async editSelf(){this.$router.push({path:"/academic/modifyInfo",query:{idx:this.$bus.$currentUser.idx}}).catch((t=>{}))},async editUser(t){this.$router.push({path:"/academic/modifyInfo",query:{idx:t}}).catch((t=>{}))},async copyFingerPrint(t){this.$bus.$emit("copyToClipboard","複製裝置碼通知",t)}}},Jt=Gt,Zt=(0,d.A)(Jt,Kt,Yt,!1,null,"bdcfc67e",null),Qt=Zt.exports,Xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"view"},[e("div",{staticClass:"header"},[e("div",{staticClass:"logo"},[e("img",{staticClass:"logo_img",attrs:{src:"img/horizontal_logo_white.png",alt:""},on:{click:function(e){return t.goTo("/")}}})]),e("div",{staticClass:"contact"},[e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("top")}}},[t._v("前往探索")]),e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("developer")}}},[t._v("版主介紹")]),e("div",{staticClass:"contact_item",on:{click:function(e){return t.scrollToSection("contact")}}},[t._v("聯絡我們")])])]),e("div",{ref:"top",staticClass:"top"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title_block"},[e("div",{staticClass:"title"},[t._v("Lemon's Websites")]),e("div",{staticClass:"subTitle"},[e("div",{ref:"subText",staticClass:"subText"},[t._v(t._s(t.subTitle))])]),e("div",{staticClass:"box"},[e("div",{staticClass:"btn btn-1",on:{click:function(e){return t.goTo("/academic")}}},[t._v("進入基地 "),e("i",{staticClass:"fa-solid fa-arrow-right start-arrow"})]),e("div",{staticClass:"btn btn-2",on:{click:function(e){return t.scrollToSection("developer")}}},[t._v("版主介紹 "),e("i",{staticClass:"fa-solid fa-chevron-right"})])])]),e("div",{staticClass:"carousel"},[e("el-carousel",{attrs:{interval:3e3,type:"card",height:"281.25px"}},t._l(t.banner,(function(t,s){return e("el-carousel-item",{key:s},[e("div",{staticClass:"medium"},[e("img",{attrs:{src:t,alt:""}})])])})),1)],1)])]),e("div",{ref:"developer",staticClass:"developer"},[e("div",{staticClass:"developer_title"},[t._v("版主介紹")]),t._m(0)]),e("div",{ref:"contact",staticClass:"footer"},[t._m(1)]),e("div",{staticClass:"back",on:{click:function(e){return t.scrollToSection("top")}}},[e("i",{staticClass:"fa-solid fa-angles-up"})])])},te=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"developer_content"},[e("div",{staticClass:"developer_img"},[e("img",{attrs:{src:"img/author.jpg",alt:""}})]),e("div",{staticClass:"developer_intro_box"},[e("div",{staticClass:"developer_name"},[t._v("主要作者：林英豪")]),e("div",{staticClass:"developer_detail"},[t._v(" 嗨，我是林英豪，也可以叫我 SCLemon。目前就讀於國立清華大學碩士學位，研究領域為「前瞻半導體二維材料元件設計」。同時，我對人工智慧、前端開發與投資研究也充滿熱情。從理論到實作，我喜歡把想法化為具體成果──無論是自行訓練 LSTM 股價預測模型、嘗試大語言模型的本地部署，還是開發 Vue.js 專案與 Chrome 擴充功能，都是我探索的旅程。 "),e("br"),t._v("在學習與研究的過程中，我不僅追求技術上的突破，也重視創意與應用的延展。對我來說，科技就像「檸檬」──看似平凡，卻能激發無限可能，既能為生活增添風味，也能成為靈感的起點。這裡是我的小小天地，用來分享我的學習、作品與想法。如果你也對人工智慧、程式設計，或是創新的投資思維感興趣，歡迎一起交流，探索更廣闊的世界。 ")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer_item"},[e("div",[t._v("聯絡方式：blc0000421@gmail.com")]),e("div",[t._v("Copyright © 2025 Lemon's Universe All Rights Reserved")])])}],ee={name:"Index",data(){return{banner:["img/banner1.jpg","img/banner2.jpg","img/banner3.jpg"],subTitle:"Step into Lemon’s Universe — A Journey of Curiosity, Creation, and Endless Discovery."}},mounted(){setTimeout((()=>{try{let t=this.$refs.subText;t&&(t.style="border-right:none;")}catch(t){}}),6500)},methods:{goTo(t){this.$router.push(t).catch((t=>{}))},scrollToSection(t){const e=this.$refs[t];if(e){const t=120,s=e.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:s,behavior:"smooth"})}}},beforeDestroy(){}},se=ee,ae=(0,d.A)(se,Xt,te,!1,null,"67003ee4",null),ie=ae.exports,ne=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header"},[t._v("使用者資料維護 "),e("el-button",{staticClass:"btn",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.modifyData()}}},[t._v("更新資料")])],1),e("div",{staticClass:"box"},[e("div",{staticClass:"userInfoBox"},[e("div",{staticClass:"user_info"},[e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("帳號：")]),e("el-input",{attrs:{placeholder:"請輸入使用者學號",disabled:""},model:{value:t.userInfo.account,callback:function(e){t.$set(t.userInfo,"account",e)},expression:"userInfo.account"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("姓名：")]),e("el-input",{attrs:{placeholder:"請輸入使用者姓名"},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("密碼：")]),e("el-input",{attrs:{placeholder:"請輸入使用者密碼","show-password":""},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("電話：")]),e("el-input",{attrs:{placeholder:"請輸入電話號碼"},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("電子信箱：")]),e("el-input",{attrs:{placeholder:"請輸入電子信箱"},model:{value:t.userInfo.mailAddress,callback:function(e){t.$set(t.userInfo,"mailAddress",e)},expression:"userInfo.mailAddress"}})],1),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input_title"},[t._v("住家地址：")]),e("el-input",{attrs:{placeholder:"請輸入住家地址"},model:{value:t.userInfo.address,callback:function(e){t.$set(t.userInfo,"address",e)},expression:"userInfo.address"}})],1)]),e("div",{staticClass:"user_img_box"},[e("div",{staticClass:"user_img",on:{click:function(e){return t.openFile()}}},[e("img",{attrs:{src:t.userInfo.userImgUrl,alt:""}}),e("div",{staticClass:"uploadImgBtn"},[t._v("點擊上傳")])]),e("input",{ref:"imgFile",staticClass:"imgFile",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.handleChangeFile()}}})])]),e("div",{staticClass:"id_card_box"},[e("div",{ref:"forward",staticClass:"id_card id_card_forward"},[t._m(0),e("div",{staticClass:"id_card_forward_name_title"},[t._v("姓名/Name")]),e("div",{staticClass:"id_card_forward_name"},[t._v(t._s(t.userInfo.name))]),e("div",{staticClass:"id_card_forward_id_title"},[t._v("證號/"+t._s("teacher"==t.userInfo.type?"Admin":"Member")+" ID")]),e("div",{staticClass:"id_card_forward_id"},[t._v(t._s(t.userInfo.account))]),e("div",{staticClass:"id_card_forward_imgBox"},[e("img",{attrs:{src:t.userInfo.userImgUrl,alt:""}})]),e("div",{staticClass:"id_card_forward_barcode"},[e("svg",{ref:"barcode"})]),e("div",{staticClass:"id_card_forward_type_box"},[e("div",{staticClass:"id_card_forward_type"},[t._v(t._s(t.userInfo.level?t.userInfo.level.levelTitle:""))]),e("div",{staticClass:"id_card_forward_type_eng"},[t._v(t._s("teacher"==t.userInfo.type?"Admin":"Member")+" ID Card")])])]),e("div",{ref:"backward",staticClass:"id_card id_card_backward"},[t._m(1)]),e("div",{staticClass:"id_card_download"},[e("div",{staticClass:"level"},[e("div",{staticClass:"manageLevelTitle"},[t._v("調整會員等級")]),e("el-select",{attrs:{placeholder:"請選擇等級"},model:{value:t.userInfo.level.level,callback:function(e){t.$set(t.userInfo.level,"level",e)},expression:"userInfo.level.level"}},t._l(t.levelTitleArray,(function(t,s){return e("el-option",{key:s,attrs:{label:`Lv${s+1} ${t}`,value:s+1}})})),1)],1),e("div",[e("el-button",{staticClass:"download_btn",attrs:{type:"primary"},on:{click:function(e){return t.downloadForward()}}},[t._v("下載卡片正面")])],1),e("div",[e("el-button",{staticClass:"download_btn",attrs:{type:"primary"},on:{click:function(e){return t.downloadBackward()}}},[t._v("下載卡片背面")])],1)])])])])},oe=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"id_card_forward_top"},[e("img",{attrs:{src:"img/horizontal_logo.png",alt:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"id_card_backward_center"},[e("div",{staticClass:"id_card_backward_center_first"},[t._v("Knowledge lights the future")]),e("div",{staticClass:"id_card_backward_center_first"},[t._v("Learning creates possibilities")])])}],re=s(9867),le=s.n(re),ce=s(4533),de=s.n(ce),ue={name:"ModifyStudentInfo",data(){return{loading:!1,idx:"",file:{},userInfo:{idx:"",type:"",account:"",name:"",password:"",phone:"",mailAddress:"",address:"",level:{level:1,levelTitle:"新手會員"},userImgUrl:""},levelTitleArray:[]}},async mounted(){let t=this.$route.query.idx;t?(this.idx=t,await this.getData()):this.$bus.$emit("handleAlert","使用者資料維護通知","參數不可為空","error")},methods:{async getData(){const t=o.A.get("authToken"),e=await r.A.get(`/api/userInfo/getUserInfo/${this.idx}`,{headers:{"x-user-token":t}});"success"==e.data.type?(e.data.user.userImgUrl+=`?${(new Date).getTime()}`,this.userInfo=e.data.user,this.levelTitleArray=e.data.levelTitleArray,this.$bus.$emit("updateCurrentUser"),this.generateBarcode()):this.$bus.$emit("handleAlert","使用者資料獲取通知",e.data.message,e.data.type)},async modifyData(){this.loading=!0;let t=new FormData;t.append("userInfo",JSON.stringify(this.userInfo)),t.append("attachments",this.file);try{const e=o.A.get("authToken"),s=await r.A.post(`/api/userInfo/modifyUserInfo/${this.idx}`,t,{headers:{"x-user-token":e}});"success"==s.data.type?(this.$refs["imgFile"].value="",this.getData(),this.$bus.$emit("handleAlert","使用者資料更新通知",s.data.message,s.data.type)):this.$bus.$emit("handleAlert","使用者資料更新通知",s.data.message,s.data.type)}catch(e){}finally{this.loading=!1}},generateBarcode(){const t=o.A.get("authToken");le()(this.$refs.barcode,t,{format:"CODE128",displayValue:!0,lineColor:"black",background:"transparent",width:2,height:100,textMargin:20})},openFile(){this.$refs["imgFile"].click()},handleChangeFile(){let t=this.$refs["imgFile"].files[0];if(t){let e=new FileReader;e.readAsDataURL(t),e.onload=()=>{this.userInfo.userImgUrl=e.result},this.file=t}},downloadForward(){const t=this.$refs.forward;de()(t,{scale:10,useCORS:!0}).then((t=>{const e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="forward.png",e.click()}))},downloadBackward(){const t=this.$refs.backward;de()(t,{scale:10,useCORS:!0}).then((t=>{const e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="backward.png",e.click()}))}}},he=ue,pe=(0,d.A)(he,ne,oe,!1,null,"e0627b4c",null),me=pe.exports;a["default"].use(p.Ay);const ge=new p.Ay({routes:[{path:"/",component:ie},{path:"/academic",component:$,children:[{path:"post",component:it,children:[{path:"share",component:dt},{path:"",component:ft}]},{path:"learn",component:S},{path:"class",component:W},{path:"login",component:kt},{path:"studentInfo",component:At,children:[{path:"studentCourseTable",component:Ot},{path:"/",redirect:"studentCourseTable"}]},{path:"teacherInfo",component:Mt,children:[{path:"clientTable",component:Qt},{path:"teacherCourseTable",component:Wt},{path:"/",redirect:"clientTable"}]},{path:"modifyInfo",component:me},{path:"/",redirect:"post"}]}]});ge.beforeEach((async(t,e,s)=>{const a=o.A.get("authToken"),i=["/","/academic/login","/academic/post/share"];if(!i.includes(t.path)&&!a)return s("/academic/login");const n=await r.A.post("/login/token",{save:!1},{headers:{"x-user-token":a,"x-user-fingerprint":localStorage.getItem("deviceFingerprint")}});if(!i.includes(t.path)&&!n.data.userInfo)return o.A.remove("authToken"),s("/academic/login"),void location.reload();if(t.fullPath.includes("teacherInfo"))return n.data.userInfo&&"teacher"==n.data.userInfo.typeEng?s():(o.A.remove("authToken"),s("/academic/login"),void location.reload());if(t.fullPath.includes("studentInfo")){if(!n.data.userInfo||"student"!=n.data.userInfo.typeEng)return o.A.remove("authToken"),s("/academic/login"),void location.reload();s()}return s()}));var fe=ge,ve=s(4927),_e=s.n(ve);a["default"].config.productionTip=!1,a["default"].use(_e()),a["default"].directive("lazy",{inserted(t){const e=new IntersectionObserver((([s])=>{s.isIntersecting&&(t.src=t.dataset.src,e.unobserve(t))}),{threshold:.1});e.observe(t)}}),new a["default"]({render:t=>t(h),router:fe,beforeCreate(){a["default"].prototype.$bus=this}}).$mount("#app")},5352:function(){},5365:function(){},8196:function(){},1671:function(){},6959:function(){},195:function(){}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,a,i,n){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],n=t[d][2];for(var r=!0,l=0;l<a.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,o=a[0],r=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var d=l(s)}for(e&&e(a);c<o.length;c++)n=o[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},a=self["webpackChunkLemon_s_Universe"]=self["webpackChunkLemon_s_Universe"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(3525)}));a=s.O(a)})();
//# sourceMappingURL=app.96d3baab.js.map